{% extends 'base.html' %}
{% load static %}

{% block title %}Savatcha - Uzum Market{% endblock %}

{% block content %}
<h1 style="margin-bottom: 20px;">Savatcha</h1>

{% if cart|length > 0 %}
<div style="background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
    <table style="width: 100%; border-collapse: collapse;">
        <thead style="background: #f9f9f9; border-bottom: 1px solid #eee;">
            <tr>
                <th style="text-align: left; padding: 15px;">Mahsulot</th>
                <th style="text-align: center; padding: 15px;">Narxi</th>
                <th style="text-align: center; padding: 15px;">Soni</th>
                <th style="text-align: right; padding: 15px;">Jami</th>
                <th style="padding: 15px;"></th>
            </tr>
        </thead>
        <tbody>
            {% for item in cart %}
            <tr style="border-bottom: 1px solid #eee;">
                <td style="padding: 15px; display: flex; align-items: center;">
                    {% if item.product.image %}
                    <img src="{{ item.product.image.url }}"
                        style="width: 50px; height: 50px; object-fit: cover; margin-right: 15px; border-radius: 6px;">
                    {% endif %}
                    <a href="{% url 'product_detail' item.product.slug %}"
                        style="text-decoration: none; color: #333; font-weight: 500;">
                        {{ item.product.name }}
                    </a>
                </td>
                <td style="text-align: center; padding: 15px;">{{ item.price }} so'm</td>
                <td style="text-align: center; padding: 15px;">{{ item.quantity }}</td>
                <td style="text-align: right; padding: 15px; font-weight: bold;">{{ item.total_price }} so'm</td>
                <td style="text-align: center; padding: 15px;">
                    <a href="{% url 'cart_remove' item.product.id %}" style="color: red; text-decoration: none;">&times;
                        O'chirish</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr style="background: #f5f5f5;">
                <td colspan="3" style="text-align: right; padding: 15px; font-weight: bold;">Jami summa:</td>
                <td
                    style="text-align: right; padding: 15px; font-weight: bold; font-size: 1.2rem; color: var(--primary-color);">
                    {{ cart.get_total_price }} so'm
                </td>
                <td></td>
            </tr>
        </tfoot>
    </table>
</div>

<div style="display: flex; justify-content: flex-end; margin-top: 20px; gap: 10px;">
    <a href="{% url 'home' %}"
        style="padding: 12px 24px; text-decoration: none; color: #555; background: #eee; border-radius: 8px;">Xaridni
        davom ettirish</a>
    <button
        style="padding: 12px 24px; border: none; background: var(--secondary-color); border-radius: 8px; font-weight: bold; cursor: pointer;">Buyurtma
        berish</button>
</div>

{% else %}
<div style="text-align: center; padding: 50px; background: white; border-radius: 12px;">
    <h3 style="color: #777;">Savatchangiz bo'sh</h3>
    <a href="{% url 'home' %}" class="auth-btn" style="display: inline-block; margin-top: 15px;">Do'konga qaytish</a>
</div>
{% endif %}
{% endblock %}